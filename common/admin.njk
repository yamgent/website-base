{% macro show_admin_pagetop_for_topic(topics, topic) %}
<frontmatter>
title: "Admin: {{ topic.title }}"
footer: footer.md
siteNav: adminSiteNav.md
</frontmatter>

<link rel="stylesheet" href="../css/main.css">
<link rel="stylesheet" href="../css/admin.css">

<include src="../common/header.md" />

<div class="website-content">

{{ show_next_previous(topics, topic.id) }}
<br>
{% endmacro %}


{% macro show_admin_pagetop(topics, current_topic_id) %}
{% for topic in topics %}
{% if topic.id == current_topic_id %}
  {{ show_admin_pagetop_for_topic(topics, topic) }}
{% endif %}
{% endfor %}
{% endmacro %}


{% macro show_previous(topic)-%}
<span style="float:left"><md>{{ glyphicon_chevron_left }} [{{ topic.title }}]({{ topic.link }})</md></span>
{%- endmacro %}


{% macro show_next(topic)-%}
<span style="float:right"><md>[{{ topic.title }} {{ glyphicon_chevron_right }}]({{ topic.link }})</md></span>
{%- endmacro %}

{# this macro has extra complications in order to avoid a line break between the two spans. Assumes at least two topics. #}
{% macro show_next_previous(topics, current_topic_id) -%}
{% for topic in topics %}
{% if topic.id == current_topic_id %}
  {% if not loop.first %}
    {% set  previous_topic = topics[loop.index0 - 1] %}
  {% endif %}
  {% if not loop.last %}
    {% set  next_topic = topics[loop.index0 + 1] %}
  {% endif %}
{% if loop.first %}
{{ show_next(next_topic) }}
{% elseif loop.last %}
{{ show_previous(previous_topic) }}
{% else %}
{{ show_previous(previous_topic) }}{{ show_next(next_topic) }}
{% endif %}
{% endif %}
{% endfor %}
{%- endmacro %}

{% macro show_admin_pagebottom(topics, current_topic_id)%}
<br>
{{ show_next_previous(topics, current_topic_id) }}

</div>
{% endmacro %}

{% set topics = [
  {id: "preliminaries", title: "Preliminaries", link: "preliminaries.html"},
  {id: "learningOutcomes", title: "Learning Outcomes", link: "learningOutcomes.html"},
  {id: "lectures", title: "Lectures", link: "lectures.html"},
  {id: "tutorials", title: "Tutorials", link: "tutorials.html"},
  {id: "textbooks", title: "Text Books", link: "textbooks.html"},
  {id: "programming-languages", title: "Programming Language", link: "programming-languages.html"},
  {id: "project-overview", title: "Project: Overview", link: "project-overview.html"},
  {id: "project-product", title: "Project: The product", link: "project-product.html"},
  {id: "project-scope", title: "Project: Scope", link: "project-scope.html"},
  {id: "project-constraints", title: "Project: Constraints", link: "project-constraints.html"},
  {id: "project-timeline", title: "Project: Timeline", link: "project-timeline.html"},
  {id: "project-w03-inception", title: "Project: inception [week 3]", link: "project-w03-inception.html"},
  {id: "project-w04-mid-v10", title: "Project: mid-v1.0 [week 4]", link: "project-w04-mid-v10.html"},
  {id: "project-w05-v10", title: "Project: v1.0 [week 5]", link: "project-w05-v10.html"},
  {id: "project-w06-mid-v11", title: "Project: mid-v1.1 [week 6]", link: "project-w06-mid-v11.html"},
  {id: "project-w07-v11", title: "Project: v1.1 [week 7]", link: "project-w07-v11.html"},
  {id: "project-w08-mid-v12", title: "Project: mid-v1.2 [week 8]", link: "project-w08-mid-v12.html"},
  {id: "project-w09-v12", title: "Project: v1.2 [week 9]", link: "project-w09-v12.html"},
  {id: "project-w10-mid-v13", title: "Project: mid-v1.3 [week 10]", link: "project-w10-mid-v13.html"},
  {id: "project-w11-v13", title: "Project: v1.3 [week 11]", link: "project-w11-v13.html"},
  {id: "project-w12-mid-v14", title: "Project: mid-v1.4 [week 12]", link: "project-w12-mid-v14.html"},
  {id: "project-w13-v14", title: "Project: v1.4 [week 13]", link: "project-w13-v14.html"},
  {id: "project-deliverables", title: "Project: Deliverables", link: "project-deliverables.html"},
  {id: "project-assessment", title: "%%→%% Assessment", link: "project-assessment.html"},
  {id: "supervision", title: "Supervision", link: "supervision.html"},
  {id: "teams", title: "Forming Teams", link: "teams.html"},
  {id: "peer-evaluations", title: "Peer Evaluations", link: "peer-evaluations.html"},
  {id: "tools", title: "Tools", link: "tools.html"},
  {id: "gradeBreakdown", title: "Grade Breakdown", link: "gradeBreakdown.html"},
  {id: "exams", title: "Exams", link: "exams.html"},
  {id: "participation", title: "Participation Marks", link: "participation.html"},
  {id: "appendixA-principles", title: "Appendix A: Module Principles", link: "appendixA-principles.html"},
  {id: "appendixB-policies", title: "Appendix B: Module Policies", link: "appendixB-policies.html"},
  {id: "appendixC-faq", title: "Appendix C: Frequently Asked Questions", link: "appendixC-faq.html"},
  {id: "appendixD-help", title: "Appendix D: How to get help in this module", link: "appendixD-help.html"},
  {id: "appendixE-gitHub", title: "Appendix E: Using GitHub Project Hosting", link: "appendixE-gitHub.html"},
  {id: "appendixF-teamworkIssues", title: "Appendix F: Handling teamwork issues", link: "appendixF-teamworkIssues.html"}
]%}

{% macro show_admin_page(current_topic_id, main_text_macro)%}
{{ show_admin_pagetop(topics, current_topic_id) }}
{{ main_text_macro() }}
{{ show_admin_pagebottom(topics, current_topic_id) }}
{% endmacro %}